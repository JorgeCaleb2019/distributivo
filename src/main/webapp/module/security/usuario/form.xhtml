<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:jsf="http://xmlns.jcp.org/jsf"
                xmlns:f="http://xmlns.jcp.org/jsf/core">

    <div class="ui-g-12 ui-md-12 ui-lg-12"><span style="font-size: 18px">#{usuarioBean.title}</span></div>
    <div class="ui-g-12 ui-md-12 ui-lg-12">
        <p:commandButton value="#{usuarioBean.persistence.name()}"  id="accion"
                         rendered="#{not empty usuarioBean.persistence.name()}"
                         update=":mensaje :formDatos" styleClass="btn btn-danger"
                         actionListener="#{usuarioBean.executeAction(evt)}">
            <p:confirm header="Confirmaci칩n de #{usuarioBean.persistence.name()}" message="Esta seguro que desea realizar esta Acci칩n" icon="ui-icon-alert" />
        </p:commandButton> 
        <p:spacer width="5"/>
        <p:splitButton value="Acciones" styleClass="blue-grey-btn" rendered="#{usuarioBean.typeOfView eq 'view'}">
            <p:menuitem value="Modificar" icon="ui-icon-pencil" actionListener="#{usuarioBean.changeView('edit','')}" update=":formDatos"/>
            <p:menuitem value="Eliminar" icon="ui-icon-close" actionListener="#{usuarioBean.changeView('delete','')}" update=":formDatos"/>
        </p:splitButton>
        <p:spacer width="5"/>
        <p:commandButton value="Atr치s"  actionListener="#{usuarioBean.changeView('list','')}" 
                         update=":formDatos" immediate="true" styleClass="teal-btn"/>
        <br/>
        <br/>
        <hr/>
        <div class="ui-g-12 ui-md-12 ui-lg-12">
            <div class="card" >
                <p:tabView id="datos">
                    <p:tab title="Detalles de Usuario">
                        <h:panelGrid columns="3" >
                            <h:panelGrid  columns="3"  cellpadding="10" cellspacing="10">  
                                <p:outputLabel value="Usuario" for="user" />
                                <p:inputText id="user" readonly="#{usuarioBean.typeOfView eq 'view' or usuarioBean.typeOfView eq 'delete'}" value="#{usuarioBean.entidad.nickUsua}" required="true" requiredMessage="El usuario es Requerido"/>
                                <p:column/>
                                <p:outputLabel value="Nombres" for="txtnombres" />
                                <p:inputText id="txtnombres" readonly="#{usuarioBean.typeOfView eq 'view' or usuarioBean.typeOfView eq 'delete'}"  value="#{usuarioBean.entidad.nombresUsua}" maxlength="60" required="true" requiredMessage="El Nombre es Requerido" />
                                
                                <p:column/>
                                <p:outputLabel value="Apellidos" for="txtapellidos" />
                                <p:inputText id="txtapellidos" readonly="#{usuarioBean.typeOfView eq 'view' or usuarioBean.typeOfView eq 'delete'}"  value="#{usuarioBean.entidad.apellidosUsua}" maxlength="60" required="true" requiredMessage="El Nombre es Requerida"/>
                                <p:column/>
                                <p:outputLabel for="txtmal" value="E-mail" />
                                <p:inputText id="txtmal" readonly="#{usuarioBean.typeOfView eq 'view' or usuarioBean.typeOfView eq 'delete'}" value="#{usuarioBean.entidad.emailUsua}" style="width: 300px" maxlength="60" required="false" validatorMessage="formato de mail incorrecto">
                                <f:validateRegex
					pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" /> 
                                </p:inputText>
                                <p:column/>                         
                                <p:outputLabel value="Estado" for="estado" />
                                <p:selectOneMenu id="estado"  value="#{usuarioBean.entidad.estado}"
                                         disabled="#{usuarioBean.typeOfView eq 'view' or usuarioBean.typeOfView eq 'delete' or usuarioBean.typeOfView eq 'create'}">
                                    <f:selectItem itemLabel="ACTIVO" itemValue="ACTIVO"/>
                                    <f:selectItem itemLabel="INACTIVO" itemValue="INACTIVO"/>
                                </p:selectOneMenu>
                                 <p:column/> 
                    
                            </h:panelGrid> 
                                
                               

                            <h:panelGrid>    
                            <p:spacer width="20"/>
                            <p:column>
                               <p:outputLabel value="Clic sobre la imagen para subir su foto" /> 
                            </p:column>
                            <img jsf:id="foto" src="#{request.contextPath}/externalresources/?obj=#{usuarioBean.entidad.foto}" style="text-align: center;width: 150px;height: 150px;border-radius: 100%;cursor: pointer; border:1px }" onclick="PF('dlgUpImage').show()"/>
                            </h:panelGrid>
                        </h:panelGrid>
                    </p:tab>
                    <p:tab title="Roles Asignados" rendered="#{usuarioBean.typeOfView eq 'view' or usuarioBean.typeOfView eq 'delete'}">
                        <p:dataTable value="#{usuarioBean.entidad.rolList}" var="rol"   style="width: 100%">
                            <p:column headerText="Usuario">
                                <h:outputText value="#{rol.nombreRol}" />
                            </p:column>
                            <p:column headerText="Descripci칩n">
                                <h:outputText value="#{rol.descripcionRol}" />
                            </p:column>
                        </p:dataTable>    
                    </p:tab>
                </p:tabView>
            </div>
        </div>    
    </div>  
</ui:composition>

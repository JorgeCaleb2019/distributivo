<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:cc="http://xmlns.jcp.org/jsf/composite"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:jsf="http://xmlns.jcp.org/jsf">

    <!-- INTERFACE -->
    <cc:interface >
        <cc:attribute name="bean" type="com.ecuasis.isiserp.utilidadisis.controller.SiabController" required="true"/>
        <cc:attribute name="update" required="true"/>
    </cc:interface>

    <!-- IMPLEMENTATION -->
    <cc:implementation>

        <p:remoteCommand actionListener="#{cc.attrs.bean.table.load()}" name="reloadTable"
                         update="searchkeys,paginator,table"/>
        <div class="card docs">
            <div class="ui-g">
                <div class="ui-g-12" jsf:rendered="#{cc.attrs.bean.typeOfView eq 'list'}">
                    <div class="ui-g-2 ui-md-3 ui-lg-6"><span style="font-size: 18px">#{cc.attrs.bean.title}</span></div>
                    <div class="ui-g-6 ui-md-9 ui-lg-6" >
                        <div style="float: right;display: inline-block">
                            <p:chips id="searchkeys" value="#{cc.attrs.bean.table.searchKeys}" 
                                     style="width: 90%;"/>
                            <span style="width: 10%;cursor: pointer" onclick="reloadTable()"><i onclick="" class="topbar-icon material-icons" >î¢¶</i></span>   
                        </div>
                    </div>
                    <div class="ui-g-2 ui-md-4 ui-lg-6">
                        <p:commandButton value="Crear"  actionListener="#{cc.attrs.bean.changeView('create','')}" update="#{cc.attrs.update}"/>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-6" style="text-align: right">
                        <h:panelGrid columns="3" style="float: right;width: 50%" >
                            <h:panelGroup layout="inline" id="paginator">
                                <h:outputText value="#{cc.attrs.bean.table.paginator.rowFirst}-#{cc.attrs.bean.table.paginator.rows}"/>
                                <h:outputText value=" / "/>
                                <h:outputText value="#{cc.attrs.bean.table.paginator.totalRows}"/>
                            </h:panelGroup>
                            <h:panelGroup layout="inline">
                                <p:commandButton icon="ui-icon-navigate-before" 
                                                 actionListener="#{cc.attrs.bean.table.paginator.back()}"
                                                 oncomplete="reloadTable();"/>
                                <p:commandButton icon="ui-icon-navigate-next"
                                                 oncomplete="reloadTable();"
                                                 actionListener="#{cc.attrs.bean.table.paginator.next()}"/>
                            </h:panelGroup>
                            <h:panelGroup>
                                <p:commandButton icon="ui-icon-dashboard" 
                                                 actionListener="#{cc.attrs.bean.table.activeKanban()}"
                                                 update="table"
                                                 style="border-radius: 2px 2px 2px 2px!important"/>
                                <p:commandButton icon="ui-icon-list" 
                                                 actionListener="#{cc.attrs.bean.table.activeList()}"
                                                 update="table"
                                                 style="border-radius: 2px 2px 2px 2px!important"/>
                            </h:panelGroup>
                        </h:panelGrid>
                    </div>

                </div>

                <div class="ui-g-12 ui-md-12 ui-lg-12">
                    <div jsf:id="table">
                        <cc:insertChildren></cc:insertChildren>
                    </div>
                </div>
            </div>
        </div>
        <p:confirmDialog global="true" showEffect="fade" hideEffect="explode">
            <p:commandButton value="SI" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
            <p:commandButton value="NO" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
        </p:confirmDialog>
    </cc:implementation>
</html>